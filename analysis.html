<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Brew Tracker Data Analysis</title>
	<link href="style.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" media="all" href="js/jsDatePick/jsDatePick_ltr.min.css" />
    
    <script id="datasource" language="javascript" type="text/javascript" src="data.js"></script>
	<script language="javascript" type="text/javascript" src="js/flot/jquery.js"></script>
	<script language="javascript" type="text/javascript" src="js/flot/jquery.flot.js"></script>
	<script language="javascript" type="text/javascript" src="js/flot/jquery.flot.time.js"></script>
	<script language="javascript" type="text/javascript" src="js/moment.js"></script>
	<script language="javascript" type="text/javascript" src="js/jsDatePick/jsDatePick.min.1.3.js"></script>
	<script type="text/javascript">

    var d = [ [moment("2013-05-07 15:10:00"),65],
					[moment("2013-05-07 15:13:00"),69],
					[moment("2013-05-07 15:16:00"),65],
					[moment("2013-05-07 15:19:00"),59],
					[moment("2013-05-07 15:22:00"),63],
					[moment("2013-05-07 15:25:00"),61],
					[moment("2013-05-07 15:28:00"),60],
					[moment("2013-05-07 15:31:00"),63],
					[moment("2013-05-07 15:34:00"),55],
					[moment("2013-05-07 15:37:00"),57],
					[moment("2013-05-07 15:40:00"),65],
					[moment("2013-05-07 15:43:00"),67],
					[moment("2013-05-07 15:47:00"),63],
					[moment("2013-05-07 15:50:00"),60],
					[moment("2013-05-08 15:53:00"),64] ];
                    
	window.onload = function(){
        console.log("init page...");
		new JsDatePick({
			useMode:2,
			target:"minDateInput"
			});
		new JsDatePick({
			useMode:2,
			target:"maxDateInput"
			});
            
        if(document.getElementById("minDateInput").value != ""){
            document.getElementById("minDateInput").value = "";
        }
        if(document.getElementById("maxDateInput").value != ""){
            document.getElementById("maxDateInput").value = "";
        }
	};
	
    function refineResults(){
        var minDate = document.getElementById("minDateInput").value;
        var maxDate = document.getElementById("maxDateInput").value;
        console.log("refine data results to range " + minDate + " to " + maxDate);
        $.plot("#placeholder", [d], {
                xaxis: {
					mode: "time",
					min: moment(minDate),
					max: moment(maxDate),
					ticks: 5,
					timeformat: "%Y-%m-%d %H:%M:%S"
				}
			});
    }
    
	$(function() {

		
					
		$.plot("#placeholder", [d], {
			xaxis: { mode: "time",
					ticks: 5,
					timeformat: "%Y-%m-%d %H:%M:%S"}
		});

		$("#whole").click(function () {
			$.plot("#placeholder", [d], {
				xaxis: { mode: "time" }
			});
		});

		$("#nineties").click(function () {
			$.plot("#placeholder", [d], {
				xaxis: {
					mode: "time",
					min: (new Date(1990, 0, 1)).getTime(),
					max: (new Date(2000, 0, 1)).getTime()
				}
			});
		});

		$("#latenineties").click(function () {
			$.plot("#placeholder", [d], {
				xaxis: {
					mode: "time",
					minTickSize: [1, "year"],
					min: (new Date(1996, 0, 1)).getTime(),
					max: (new Date(2000, 0, 1)).getTime()
				}
			});
		});

		$("#ninetyninequarters").click(function () {
			$.plot("#placeholder", [d], {
				xaxis: {
					mode: "time",
					minTickSize: [1, "quarter"],
					min: (new Date(1999, 0, 1)).getTime(),
					max: (new Date(2000, 0, 1)).getTime()
				}
			});
		});

		$("#ninetynine").click(function () {
			$.plot("#placeholder", [d], {
				xaxis: {
					mode: "time",
					minTickSize: [1, "month"],
					min: (new Date(1999, 0, 1)).getTime(),
					max: (new Date(2000, 0, 1)).getTime()
				}
			});
		});

		$("#lastweekninetynine").click(function () {
			$.plot("#placeholder", [d], {
				xaxis: {
					mode: "time",
					minTickSize: [1, "day"],
					min: (new Date(1999, 11, 25)).getTime(),
					max: (new Date(2000, 0, 1)).getTime(),
					timeformat: "%a"
				}
			});
		});

		$("#lastdayninetynine").click(function () {
			$.plot("#placeholder", [d], {
				xaxis: {
					mode: "time",
					minTickSize: [1, "hour"],
					min: (new Date(1999, 11, 31)).getTime(),
					max: (new Date(2000, 0, 1)).getTime(),
					twelveHourClock: true
				}
			});
		});


	});
	</script>
</head>
<body>
	<!--Header Begin-->
	<div id="header">
	<h2>Brew Tracker</h2>
	  <div class="center">
		<div id="logo"><a href="#">Brew Tracker</a></div>
		<!--Menu Begin-->
		<div id="menu">
		  <ul>
			<li><a class="active" href="index.html"><span>Home</span></a></li>
			<li><a href="analysis.html"><span>Analysis</span></a></li>
			<li><a href="#"><span>Administrative</span></a></li>
			<li><a href="#"><span>Contact</span></a></li>
		  </ul>
		</div>
		<!--Menu END-->
	  </div>
	</div>
	<!--Header END-->

	<div id="content">
        
		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder"></div>
			
			<p>Selected dates starting at: <input type="text" size="12" id="minDateInput" />
				and ending at: <input type="text" size="12" id="maxDateInput" />
				<input type="button" id="selectDatesBtn" value="Find Readings" onclick="refineResults()"/>
                <input type="button" id="testbtn" value="TESTING" onclick="getData()"/></p>
		</div>
		
	</div>

	<div id="footer">
		Brew Tracker -- Version 1.0
	</div>

</body>
</html>
